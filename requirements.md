X-Auth-Token: **** - —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è API

Project Requirements

Project Overview

–ú—ã —Å—Ç—Ä–æ–∏–º –±–æ—Ç-–∫–æ–ª–æ–Ω–∏—é –º—É—Ä–∞–≤—å—ë–≤ –¥–ª—è –ø–æ—à–∞–≥–æ–≤–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ DatsPulse.
–û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏:

–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –Ω–∞–±—Ä–∞—Ç—å –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å (—è–±–ª–æ–∫–∏ 10 –∫–∫–∞–ª, —Ö–ª–µ–± 20 –∫–∫–∞–ª, –Ω–µ–∫—Ç–∞—Ä 60 –∫–∫–∞–ª) 
–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–µ—Ä–∏ —é–Ω–∏—Ç–æ–≤ –∏ —Å—É–º–º–∞—Ä–Ω—ã–π –ø—É—Ç—å, —Ç. –∫. —ç—Ç–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å–ª—É–∂–∞—Ç —Ç–∞–π-–±—Ä–µ–π–∫–∞–º–∏ 
.
–í—Å—ë –¥–µ–ª–∞—Ç—å –≤ —É—Å–ª–æ–≤–∏—è—Ö —á–∞—Å—Ç–∏—á–Ω–æ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏ (—Ñ–æ–≥), –≥–µ–∫—Å–∞–≥–æ¬≠–Ω–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã –∏ –ª–∏–º–∏—Ç–∞ 3 RPS 
.
–°–µ—Ä–≤–∏—Å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö –º–æ–¥—É–ª–µ–π:

–ú–æ–¥—É–ª—å	–§—É–Ω–∫—Ü–∏—è
Core AI	–ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è, —Ä–∞—Å—Å—ã–ª–∞–µ—Ç /api/move
Game Gateway	–û–±—â–∞–µ—Ç—Å—è —Å –≤–Ω–µ—à–Ω–∏–º API: /api/register ‚Üí poll /api/arena ‚Üí /api/move, —Å–æ–±–ª—é–¥–∞—è 3 RPS
UI + DB	Hex-–∫–∞—Ä—Ç–∞ —Å–ª–µ–≤–∞, –ª–æ–≥ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–ø—Ä–∞–≤–∞, –∫–Ω–æ–ø–∫–∏ ¬´Run / Pause¬ª, —Ä—É—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã; SQLite —Ö—Ä–∞–Ω–∏—Ç –º–∏—Ä, –ª–æ–≥–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
Business Logic

–ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–±–µ–¥—ã
–≠—Ç–∞–ø	–ö–ª—é—á–µ–≤–∞—è –ª–æ–≥–∏–∫–∞
0. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è	POST /api/register (token, –∏–º—è). –°–æ—Ö—Ä–∞–Ω—è–µ–º teamId, home (3 –≥–µ–∫—Å–∞), spot (—Ü–µ–Ω—Ç—Ä).
1. –°–ø–∞–≤–Ω-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç	–ú—É—Ä–∞–≤–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–∞–∂–¥—ã–π —Ö–æ–¥ –≤ spot (—Ç–∏–ø –≤—ã–±–∏—Ä–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä —Å–ª—É—á–∞–π–Ω–æ; –µ—Å–ª–∏ –≤ spot —Å—Ç–æ–∏—Ç –º—É—Ä–∞–≤–µ–π —Ç–æ–≥–æ –∂–µ —Ç–∏–ø–∞ ‚Äî —Å–ø–∞–≤–Ω –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è) 
.
–ü—Ä–∞–≤–∏–ª–æ: –±–æ—Ç –æ–±—è–∑–∞–Ω –≤—ã–≤–æ–¥–∏—Ç—å —é–Ω–∏—Ç–∞ –∏–∑ spot –¥–æ –∫–æ–Ω—Ü–∞ —Ö–æ–¥–∞ ‚Üí –≤ step 4 –ø–µ—Ä–µ—Ö–æ–¥–æ–≤–∫–∏ –º–µ—Å—Ç–æ –±—É–¥–µ—Ç –ø—É—Å—Ç—ã–º ‚Üí —Å–ø–∞–≤–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω.
2. –†–∞–∑–≤–µ–¥–∫–∞ (1-3 –º–∏–Ω)	–í—Å–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Ä–∞–∑–≤–µ–¥—á–∏–∫–∏ (—Å–∫–æ—Ä–æ—Å—Ç—å 7, –æ–±–∑–æ—Ä 4)‚Äâ‚Äî‚Äâ—Ñ—Ä–æ–Ω—Ç–∏—Ä-—Å–∫–∞–Ω–µ—Ä—ã BFS: –∏—â—É—Ç ¬´–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ¬ª –≥–µ–∫—Å—ã –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ö–æ–¥–æ–≤; –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫–ª–µ—Ç–∫–∞–º —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏.
3. –ì—Ä—É–∑–æ–ø–æ—Ç–æ–∫ (–≤–µ—Å—å —Ä–∞—É–Ω–¥)	–†–∞–±–æ—á–∏–µ (–≥—Ä—É–∑ 8) —Å–æ–±–∏—Ä–∞—é—Ç, —Å–¥–∞—é—Ç, –ø–æ—Ç–æ–º –¥–µ–∂—É—Ä—è—Ç —É —Å–ø–æ—Ç–∞, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –≤—ã–≥—Ä—É–∂–∞—Ç—å –Ω–µ–∫—Ç–∞—Ä. –ü—Ä–∞–≤–∏–ª–æ —Å–±–æ—Ä–∞: –µ—Å–ª–∏ –Ω–∞ –≥–µ–∫—Å–µ ‚â† —Ç–∏–ø —É–∂–µ –Ω–µ—Å–æ–º–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ ‚Äî –∏–≥–Ω–æ—Ä (–Ω–µ–ª—å–∑—è –≤–æ–∑–∏—Ç—å –¥–≤–∞ —Ç–∏–ø–∞) 
.
4. –û—Ö—Ä–∞–Ω–∞ –∏ —Ä–µ–π–¥—ã (—Å–æ 2-–π –º–∏–Ω—É—Ç—ã)	–ë–æ–π—Ü—ã (–∞—Ç–∞–∫–∞ 70 HP) –ø–∞—Ç—Ä—É–ª–∏—Ä—É—é—Ç —Ä–∞–¥–∏—É—Å 2 –≤–æ–∫—Ä—É–≥ —Å–ø–æ—Ç–∞. –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —á—É–∂–æ–≥–æ –º—É—Ä–∞–≤—å—è –≤–æ–∑–ª–µ –Ω–∞—à–µ–≥–æ nest ‚Äî –∫–æ–Ω—Ç—Ä–∞—Ç–∞–∫—É—é—Ç; –≤–¥–∞–ª–∏ ‚Äî –Ω–µ –≥–æ–Ω—è—Ç—Å—è.
–ü—Ä–∏ –∫–∞–ª–æ—Ä–∏–π–Ω–æ–º –ª–∏–¥–µ—Ä—Å—Ç–≤–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ > 20 % –∑–∞–ø—É—Å–∫–∞–µ–º —Ä–µ–π–¥-—Å–∫–≤–∞–¥ –∏–∑ 2 –±–æ–π—Ü–æ–≤ + 1 —Ä–∞–±–æ—á–µ–≥–æ: —Å—Ç–∞—Ç—å –Ω–∞ —Å–æ—Å–µ–¥–Ω–∏–π –≥–µ–∫—Å —á—É–∂–æ–≥–æ nest, —É–∫—Ä–∞—Å—Ç—å –Ω–µ–∫—Ç–∞—Ä 
.
5. –§–∏–Ω–∏—à (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–∏–Ω)	–ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –≤—Å–µ—Ö –±–æ–π—Ü–æ–≤ –Ω–∞ ¬´—à–∞—Ö–∏–¥-—Ä–µ–∂–∏–º¬ª: –Ω–∞–±–µ–≥–∏ –Ω–∞ –ª–∏–¥–µ—Ä–æ–≤ —Å —Ü–µ–ª—å—é —Å–±–∏—Ç—å –∏–º —Å–∫–ª–∞–¥ –∏ —É–±–∏—Ç—å –º–∞–∫—Å–∏–º—É–º –º—É—Ä–∞–≤—å—ë–≤ (–ø–æ—Ä—Ç–∏–º –≤—Ç–æ—Ä–æ–µ –∫—Ä–∏—Ç–µ—Ä–∏–π). –†–∞–±–æ—á–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Å–¥–∞–≤–∞—Ç—å —Ç–æ, —á—Ç–æ —É–∂–µ –Ω–µ—Å—É—Ç.
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ü–µ–ª–∏ –¥–ª—è –ª—é–±–æ–≥–æ –º—É—Ä–∞–≤—å—è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫
P = value / (dist + 1) * riskCoeff,
–≥–¥–µ value ‚Äî –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å —Ä–µ—Å—É—Ä—Å–∞ –∏–ª–∏ –æ–∂–∏–¥–∞–µ–º–∞—è –¥–æ–±—ã—á–∞ —Å —Ä–µ–π–¥–∞; riskCoeff ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç < 1, –µ—Å–ª–∏ –≤ —Ä–∞–¥–∏—É—Å–µ 1 –µ—Å—Ç—å –≤—Ä–∞–∂–µ—Å–∫–∏–π –±–æ–µ—Ü.

–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –±–æ—Ç –æ–±—è–∑–∞–Ω —Å–æ–±–ª—é–¥–∞—Ç—å
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ	–ü—Ä–æ–≤–µ—Ä–∫–∞
3 RPS	–°—á—ë—Ç—á–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí sleep(max(0, timeWindowRemaining))
–ù–µ–ª—å–∑—è –∑–∞–π—Ç–∏ –Ω–∞ –≥–µ–∫—Å —Å —á—É–∂–∏–º —é–Ω–∏—Ç–æ–º –∏–ª–∏ —Å —Å–æ—é–∑–Ω—ã–º —Ç–æ–≥–æ –∂–µ —Ç–∏–ø–∞ 
A* —É—á–∏—Ç—ã–≤–∞–µ—Ç –∑–∞–Ω—è—Ç–æ—Å—Ç—å; –µ—Å–ª–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤–∫–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –ø—É—Ç—å ‚Üí –∞–≥–µ–Ω—Ç–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º
–ö–∞–º–Ω–∏ (—Ç–∏–ø 5) –Ω–µ–ø—Ä–æ—Ö–æ–¥–∏–º—ã 
–°—Ç–æ–∏–º–æ—Å—Ç—å ‚àû
–ö–∏—Å–ª–æ—Ç–∞ –Ω–∞–Ω–æ—Å–∏—Ç 20 —É—Ä–æ–Ω–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ –∏ –Ω–∞ –∫–æ–Ω—Ü–µ —Ö–æ–¥–∞ 
A* —à—Ç—Ä–∞—Ñ + 25, –∏–∑–±–µ–≥–∞—Ç—å –±–µ–∑ –≤–µ—Å–∫–æ–π –ø—Ä–∏—á–∏–Ω—ã
User Stories (–≤—ã–∂–∏–º–∫–∞)

–Ø, —É—á–∞—Å—Ç–Ω–∏–∫, –∂–º—É ¬´Run¬ª ‚Üí —á–µ—Ä–µ–∑ ‚â§ 3 —Å –±–æ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç —Ö–æ–¥—ã.
–Ø –≤–∏–∂—É –Ω–∞ –∫–∞—Ä—Ç–µ –≤—Å–µ—Ö –º–æ–∏—Ö –º—É—Ä–∞–≤—å—ë–≤, –≤–∏–¥–∏–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã, –≤—Ä–∞–≥–æ–≤; —Å–µ—Ä—ã–µ ‚Äî –Ω–µ–∏–∑–≤–µ–¥–∞–Ω–Ω—ã–µ –∫–ª–µ—Ç–∫–∏.
–í –ø—Ä–∞–≤–æ–º –ª–æ–≥–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫ –≤—ã–≤–æ–¥–∏—Ç—Å—è: Turn 42 | +30 kcal | 2 scouts moved | 1 bread picked by ant #123.
–ù–∞–∂–∞–≤ ¬´Pause¬ª –∏–≥—Ä–∞ –∑–∞–º–∏—Ä–∞–µ—Ç (–±–æ—Ç –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç POST /move). –í—Å—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ.
–Ø –º–æ–≥—É –∫–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –º—É—Ä–∞–≤—å—è ‚Üí –∫–Ω–æ–ø–∫–∞ ¬´Retreat¬ª ‚Üí –±–æ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—É—Ç—å —ç—Ç–æ–≥–æ —é–Ω–∏—Ç–∞ –∫ spot, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∞–≤—Ç–æ–º–∞—Ç.
Technical Requirements

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       poll arena (‚â§3 RPS)      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Core AI ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  Game  API    ‚îÇ
‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îò  POST move / logs              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ‚îÇ   ‚îÇ
   ‚îÇ   ‚îú‚îÄ‚ñ∂ SQLite (world, logs, cfg)
   ‚îÇ   ‚îÇ
   ‚îÇ   ‚îî‚îÄ‚ñ∂ FastAPI (/ui/*) ‚îÄ‚îÄ WebSocket ‚îÄ‚îÄ‚ñ∫ React UI
–Ø–∑—ã–∫: Python 3.11
HTTP ‚Äî httpx (async), pathfinding ‚Äî networkx, hex utils ‚Äî axial-coord helpers.
UI: React + TypeScript + eslint. Hex-grid ‚Äî @tqman/hexlib (–∏–ª–∏ —Å–≤–æ–π Canvas).
–ë–∞–∑–∞: SQLite 3 (fast / zero-deps).
–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º API
–≠–Ω–¥–ø–æ–∏–Ω—Ç	–ú–µ—Ç–æ–¥	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
/api/register	POST	{teamToken} ‚Üí {teamId, home, spot}
/api/arena	GET	–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π partial-state 
/api/move	POST	{ moves:[{ant:uuid, path:[{q,r}‚Ä¶]}‚Ä¶] }
/api/logs	GET	–ñ—É—Ä–Ω–∞–ª; –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
–§–ª–æ—É –Ω–∞ —Ö–æ–¥:

–ñ–¥—ë–º nextTurnIn ‚Üí 0.3 s.
GET /arena; —Å–æ—Ö—Ä–∞–Ω—è–µ–º turnNo, map –∏ —Ç.–ø.
Core AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ moves.
POST /move (1 –∑–∞–ø—Ä–æ—Å). –ï—Å–ª–∏ –ø–∞—É–∑–∞ ‚Äî –ø—Ä–æ–ø—É—Å–∫–∞–µ–º.
–ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤—Å—ë –≤ SQLite –∏ –æ—Ç—Å—ã–ª–∞–µ–º –¥–∏—Ñ—Ñ —Ñ—Ä–æ–Ω—Ç—É —á–µ—Ä–µ–∑ WS.
–ê–ª–≥–æ—Ä–∏—Ç–º—ã
–ó–∞–¥–∞—á–∞	–ê–ª–≥–æ—Ä–∏—Ç–º
–ü–æ–∏—Å–∫ –ø—É—Ç–∏	A* –ø–æ –≥–µ–∫—Å-—Ä–µ—à—ë—Ç–∫–µ —Å –≤–µ—Å–∞–º–∏: dirt = 2, acid = 1+20 HP-penalty, empty/nest = 1.
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ü–µ–ª–µ–π	–ö–∞–∂–¥—ã–µ 3 —Ö–æ–¥–∞ —Ä–µ—à–∞–µ–º assignment: —Ä–µ—Å—É—Ä—Å—ã ‚Üî —Ä–∞–±–æ—á–∏–µ —á–µ—Ä–µ–∑ –∂–∞–¥–Ω—ã–π value/(dist+1); –±–æ–π—Ü–æ–≤ –¥–µ—Ä–∂–∏–º –≤ —Ä–∞–¥–∏—É—Å–µ 2 –æ—Ç spot, –∏—Å–∫–ª—é—á–∞—è –æ–¥–Ω–æ–≥–æ ¬´—Ä–µ–π–¥–µ—Ä–∞¬ª.
–†–∞–∑–≤–µ–¥–∫–∞	–§—Ä–æ–Ω—Ç–∏—Ä ‚Äî –Ω–∞–±–æ—Ä –≥–µ–∫—Å–æ–≤, –≥–¥–µ map == null; –±–ª–∏–∂–∞–π—à–∏–π –∫ –ª—é–±–æ–º—É —Å–∫–∞—É—Ç—É –≤—ã—á–∏—Å–ª—è–µ–º BFS, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º.
–†–µ–π–¥	–£—Å–ª–æ–≤–∏–µ: enemyScore > myScore*1.2 ‚Üí –∏—â–µ–º –ø—É—Ç—å –¥–ª–∏–Ω—ã ‚â§ 10 –¥–æ –ª—é–±–æ–≥–æ –≥–µ–∫—Å–∞ –≤–æ–∫—Ä—É–≥ enemy home; –µ—Å–ª–∏ –µ—Å—Ç—å ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–π–¥-—Å–∫–≤–∞–¥; –Ω–∞ –º–µ—Å—Ç–µ –∂–¥—ë–º –∫–æ–Ω—Ü–∞ —Ö–æ–¥–∞, –∫—Ä–∞–¥—ë–º.
–ë–æ—ë–≤–∫–∞	–í –∫–æ–Ω—Ü–µ —Ö–æ–¥–∞ —Å–µ—Ä–≤–µ—Ä —Å–∞–º —Ä–∞–Ω–¥–æ–º–∏–∑–∏—Ä—É–µ—Ç order 
; –º—ã –º–æ–∂–µ–º –ø–æ–≤—ã—Å–∏—Ç—å —à–∞–Ω—Å –≤—ã–∏–≥—Ä–∞—Ç—å –∑–∞ —Å—á—ë—Ç –±–æ–Ω—É—Å–æ–≤: –¥–µ—Ä–∂–∞—Ç—å –¥–≤—É—Ö –±–æ–π—Ü–æ–≤ —Ä—è–¥–æ–º (50 % dmg bonus) + –≤ —Ä–∞–¥–∏—É—Å–µ nest (–µ—â—ë 25 %) 
.
Data Models (SQLite)
–¢–∞–±–ª–∏—Ü–∞	–ö–ª—é—á	–ü–æ–ª—è
meta	id=1	teamId, currentTurn, score
ants	id	type, q, r, hp, carryingType, carryingAmt
objects	q+r	type(hex/resource), amount, lastSeenTurn
enemies	enemyId	type, q, r, hp, lastSeenTurn
log	autoinc	ts, level, message
–ò–Ω–¥–µ–∫—Å—ã: (q,r) –Ω–∞ objects/ants ‚Üí –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫.

UI
–ó–æ–Ω–∞	–î–µ—Ç–∞–ª–∏
–ö–∞—Ä—Ç–∞ (70 %)	Canvas; —è—á–µ–π–∫–∞ = 24 px; —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ –ø–æ type; –∏–∫–æ–Ω–∫–∏: scout ‚ñ≥, fighter ‚¨£, worker ‚óº; tooltips –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏.
–ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å (30 %)	Scroll log, —Ñ–∏–ª—å—Ç—Ä—ã INFO/ERROR; –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã: turn #, score, ants count, RPS.
–ö–æ–Ω—Ç—Ä–æ–ª—ã	Run/Pause, drop-down ¬´Manual Action¬ª (Retreat, Focus <id>, Raid <team>).
Security Requirements

Token –∏–∑ .env, –Ω–µ –ª–æ–≥–∏—Ä—É–µ–º.
Rate-limiter –≤ Game Gateway, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–µ–≤—ã—Å–∏—Ç—å 3 RPS.
UI –∑–∞–∫—Ä—ã—Ç–æ Basic Auth (user/pass –≤ env).
–í—Å–µ JSON-–æ—Ç–≤–µ—Ç—ã –≤–∞–ª–∏–¥–∏—Ä—É–µ–º pydantic schemas; –ø–∞–¥–µ–Ω–∏—è –ª–æ–≤–∏–º, –±–æ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ safe-mode (pause + –∞–≤—Ç–æ–ø–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ 2 —Å).
Performance Requirements

–¶–∏–∫–ª –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è ‚â§ 50 ms (–Ω–∞ –Ω–æ—É—Ç–±—É–∫–µ).
GET /arena —Ä–æ–≤–Ω–æ 1 —Ä–∞–∑ –∑–∞ —Ö–æ–¥; POST /move ‚Äî 1.
WebSocket –ø—É—à–∏–º —Ñ—Ä–æ–Ω—Ç—É –Ω–µ —á–∞—â–µ 10 fps.
–ü–∞–º—è—Ç—å ‚©Ω 200 MB (SQLite ‚âà 1 MB).
Deployment Requirements

docker compose up ‚Äî –ø–æ–¥–Ω–∏–º–∞–µ—Ç –±–æ—Ç + nginx-reverse-proxy (443 ‚Üí FastAPI 8000).
–ì–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞: SIGINT ‚Üí Core AI –ø–∏—à–µ—Ç snapshot –≤ DB ‚Üí exit 0 ‚Üí —Å–µ—Ä–≤–∏—Å-watcher —Å—Ç–∞—Ä—Ç—É–µ—Ç –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –í—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è < 5 —Å.
–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –≤ requirements.txt; reproducible build.
Change Log

–í–µ—Ä—Å–∏—è	–î–∞—Ç–∞	–ò–∑–º–µ–Ω–µ–Ω–∏—è
1.0.0	11 Jul 2025	–ü–µ—Ä–≤–∞—è —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –¢–ó –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫–∏ DatsPulse
–ò—Ç–æ–≥
–î–æ–∫—É–º–µ–Ω—Ç –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ—á–Ω—ã–µ –∏–≥—Ä–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞, –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –Ω–∞ —Ç—Ä–∏ —Ñ–∞–∑—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î, —Å–µ—Ç–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ, UI-–º–æ–∫–∞–ø –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã. –ì–æ—Ç–æ–≤ –∫ –ø—Ä—è–º–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ç–æ–∫–µ–Ω, –Ω–∞–ø–∏—Å–∞—Ç—å –ø–∞—Ä—É –∫–ª–∞—Å—Å–æ–≤ –∏ —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å —Ö–∞–∫–∞—Ç–æ–Ω.

---

# AI Decision Flow (–ü–æ—à–∞–≥–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π)

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è**: GET /api/arena ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å—é –∫–∞—Ä—Ç—É, —é–Ω–∏—Ç–æ–≤, –≤—Ä–∞–≥–æ–≤, —Ä–µ—Å—É—Ä—Å—ã, turnNo.
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –º–æ–¥–µ–ª–∏**: –æ–±–Ω–æ–≤–ª—è–µ–º SQLite (ants, objects, enemies, meta).
3. **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ü–µ–ª–µ–π**:
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ: –∏—â–µ–º –±–ª–∏–∂–∞–π—à–∏–π —Ä–µ—Å—É—Ä—Å —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º value/(dist+1), –µ—Å–ª–∏ –Ω–µ—Å—ë—Ç ‚Äî —Å—Ç—Ä–æ–∏–º –ø—É—Ç—å –∫ spot.
   - –î–ª—è —Ä–∞–∑–≤–µ–¥—á–∏–∫–∞: –∏—â–µ–º –±–ª–∏–∂–∞–π—à–∏–π –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –≥–µ–∫—Å (map == null), —Å—Ç—Ä–æ–∏–º –ø—É—Ç—å BFS.
   - –î–ª—è –±–æ–π—Ü–∞: –µ—Å–ª–∏ –≤—Ä–∞–≥ –≤ —Ä–∞–¥–∏—É—Å–µ 2 –æ—Ç spot ‚Äî –∞—Ç–∞–∫—É–µ–º, –∏–Ω–∞—á–µ –ø–∞—Ç—Ä—É–ª–∏—Ä—É–µ–º –≤–æ–∫—Ä—É–≥ spot. –ï—Å–ª–∏ raid-—Ä–µ–∂–∏–º ‚Äî –∏—â–µ–º –ø—É—Ç—å –∫ —á—É–∂–æ–º—É nest.
4. **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—É—Ç–µ–π**: A* —Å —É—á—ë—Ç–æ–º –∑–∞–Ω—è—Ç—ã—Ö –≥–µ–∫—Å–æ–≤, –∫–∏—Å–ª–æ—Ç, –∫–∞–º–Ω–µ–π, —Å–æ—é–∑–Ω–∏–∫–æ–≤.
5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π**: –Ω–µ –∑–∞—Ö–æ–¥–∏–º –Ω–∞ –∑–∞–Ω—è—Ç—ã–µ –≥–µ–∫—Å—ã, –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞–µ–º—Å—è —Å —Å–æ—é–∑–Ω–∏–∫–∞–º–∏ —Ç–æ–≥–æ –∂–µ —Ç–∏–ø–∞, –Ω–µ –ª–µ–∑–µ–º –≤ –∫–∏—Å–ª–æ—Ç—É –±–µ–∑ –Ω—É–∂–¥—ã.
6. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è moves**: —Ñ–æ—Ä–º–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ moves[{ant, path}], –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º POST /api/move.
7. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∏ –æ—Ç–≤–µ—Ç—ã –≤ log (DB –∏ UI).
8. **UI push**: –ø—É—à–∏–º —Ñ—Ä–æ–Ω—Ç—É –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ—Ä–µ–∑ WebSocket.

---

# –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ —Ç–∏–ø—É —é–Ω–∏—Ç–∞

- **–†–∞–±–æ—á–∏–π (worker)**: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Äî –Ω–µ–∫—Ç–∞—Ä > —Ö–ª–µ–± > —è–±–ª–æ–∫–æ. –ï—Å–ª–∏ –Ω–µ—Å—ë—Ç ‚Äî —Å–¥–∞—ë—Ç. –ï—Å–ª–∏ —Å–≤–æ–±–æ–¥–µ–Ω ‚Äî –∏—â–µ—Ç –±–ª–∏–∂–∞–π—à–∏–π —Ä–µ—Å—É—Ä—Å. –ï—Å–ª–∏ –Ω–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤ ‚Äî –¥–µ–∂—É—Ä–∏—Ç —É spot.
- **–†–∞–∑–≤–µ–¥—á–∏–∫ (scout)**: –≤—Å–µ–≥–¥–∞ –∏—â–µ—Ç –±–ª–∏–∂–∞–π—à–∏–π –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –≥–µ–∫—Å, –∏–∑–±–µ–≥–∞–µ—Ç –≤—Ä–∞–≥–æ–≤, –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã.
- **–ë–æ–µ—Ü (fighter)**: –ø–∞—Ç—Ä—É–ª–∏—Ä—É–µ—Ç —Ä–∞–¥–∏—É—Å 2 –æ—Ç spot. –ï—Å–ª–∏ –≤—Ä–∞–≥ –±–ª–∏–∑–∫–æ ‚Äî –∞—Ç–∞–∫—É–µ—Ç. –ï—Å–ª–∏ raid-—Ä–µ–∂–∏–º ‚Äî –∏–¥—ë—Ç –∫ —á—É–∂–æ–º—É nest, –ø–æ–º–æ–≥–∞–µ—Ç –≤–æ—Ä–æ–≤–∞—Ç—å.

---

# Edge-cases –∏ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏

- –ï—Å–ª–∏ –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã –∑–∞–Ω—è—Ç—ã ‚Äî —Ä–∞–±–æ—á–∏–µ –¥–µ–∂—É—Ä—è—Ç —É spot.
- –ï—Å–ª–∏ –≤—Ä–∞–≥ —Ä—è–¥–æ–º —Å nest ‚Äî –≤—Å–µ –±–æ–π—Ü—ã —Å–±–µ–≥–∞—é—Ç—Å—è –Ω–∞ –∑–∞—â–∏—Ç—É.
- –ï—Å–ª–∏ –Ω–∞—à –ª–∏–¥–µ—Ä –ø–æ –æ—á–∫–∞–º ‚Äî —Ä–µ–π–¥—ã –Ω–µ —Å–æ–≤–µ—Ä—à–∞–µ–º, —Ç–æ–ª—å–∫–æ –∑–∞—â–∏—â–∞–µ–º—Å—è.
- –ï—Å–ª–∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º >20% ‚Äî –∑–∞–ø—É—Å–∫–∞–µ–º —Ä–µ–π–¥-—Å–∫–≤–∞–¥.
- –ï—Å–ª–∏ –ª–∏–º–∏—Ç —é–Ω–∏—Ç–æ–≤ ‚Äî –Ω–µ –ø–ª–æ–¥–∏–º –Ω–æ–≤—ã—Ö, –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º spot.
- –ï—Å–ª–∏ —é–Ω–∏—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω ‚Äî –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ–º –º–∞—Ä—à—Ä—É—Ç.

---

# API Reference (–∫—Ä–∞—Ç–∫–æ)

- **POST /api/register** ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, —Å–æ—Ö—Ä–∞–Ω—è–µ–º teamId, home, spot.
- **GET /api/arena** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—é–Ω–∏—Ç—ã, –∫–∞—Ä—Ç–∞, —Ä–µ—Å—É—Ä—Å—ã, –≤—Ä–∞–≥–∏, turnNo, score).
- **POST /api/move** ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ö–æ–¥–æ–≤ (moves: [{ant, path}]).
- **GET /api/logs** ‚Äî –∂—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏).

---

# Data Models (SQLite, —É—Ç–æ—á–Ω–µ–Ω–æ)

- **meta**: id, teamId, currentTurn, score, enemyScores
- **ants**: id, type, q, r, hp, carryingType, carryingAmt, lastAction
- **objects**: q, r, type(hex/resource), amount, lastSeenTurn
- **enemies**: enemyId, type, q, r, hp, lastSeenTurn
- **log**: ts, level, message, turnNo

---

# UI (—É—Ç–æ—á–Ω–µ–Ω–æ)

- **–ö–∞—Ä—Ç–∞**: hex-grid, —Ü–≤–µ—Ç –ø–æ —Ç–∏–ø—É, –∏–∫–æ–Ω–∫–∏ —é–Ω–∏—Ç–æ–≤, tooltips, —Å–µ—Ä—ã–µ ‚Äî –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ.
- **–ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å**: –ª–æ–≥ (—Ñ–∏–ª—å—Ç—Ä—ã INFO/ERROR), –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (turn, score, ants, RPS).
- **–ö–æ–Ω—Ç—Ä–æ–ª—ã**: Run/Pause, drop-down Manual Action (Retreat, Focus, Raid), –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ (test/prod).
- **–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ**: –∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π, –±–µ–∑ –æ–±–ª–∞–∫–æ–≤, –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

---

# Deployment (–µ—â—ë —Ä–∞–∑)

- **docker compose up** ‚Äî –ø–æ–¥–Ω–∏–º–∞–µ—Ç –≤—Å—ë –ª–æ–∫–∞–ª—å–Ω–æ: –±–æ—Ç, UI, nginx-proxy.
- **.env** ‚Äî —Ö—Ä–∞–Ω–∏—Ç —Ç–æ–∫–µ–Ω, user/pass –¥–ª—è UI.
- **requirements.txt** ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏, reproducible build.

---

# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É (summary)

–ë–æ—Ç –¥–µ–π—Å—Ç–≤—É–µ—Ç —Å—Ç—Ä–æ–≥–æ –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º: –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏—è value/(dist+1), –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è —Ä–∏—Å–∫–∞ (riskCoeff), –∑–∞—â–∏—Ç–∞ spot, —Ä–µ–π–¥—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–∏, —Ä–∞–∑–≤–µ–¥–∫–∞ ‚Äî BFS –ø–æ —Ñ—Ä–æ–Ω—Ç–∏—Ä—É. –í—Å–µ —Ä–µ—à–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, UI –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ê–ª–≥–æ—Ä–∏—Ç–º –∞–¥–∞–ø—Ç–∏–≤–µ–Ω: –µ—Å–ª–∏ —Å–∏—Ç—É–∞—Ü–∏—è –º–µ–Ω—è–µ—Ç—Å—è ‚Äî –º–µ–Ω—è–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –Ω–∞ –ª–µ—Ç—É.

## 2024-06-XX: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∞ –∏ –ø—Ä–æ–¥–∞
- –í—Å—è –ª–æ–≥–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è (–∞–ª–≥–æ—Ä–∏—Ç–º make_moves) –Ω–∞ –ø—Ä–æ–¥–µ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º—É —Ä–µ–∂–∏–º—É (test_bot.py).
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ (HexMap) —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å HexMap_test: –≤—Å–µ –æ—Ç—Å—Ç—É–ø—ã, —Ü–≤–µ—Ç–∞, –ø–æ–¥–ø–∏—Å–∏, –∏–∫–æ–Ω–∫–∏, –ª–µ–≥–µ–Ω–¥–∞, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, —Ä–µ—Å—É—Ä—Å—ã, –º—É—Ä–∞–≤—å–∏, –≤—Ä–∞–≥–∏.
- –ù–∞ –ø—Ä–æ–¥–µ –¥–∞–Ω–Ω—ã–µ –æ –∫–∞—Ä—Ç–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ API, –∞ –Ω–µ —Å —Ñ—Ä–æ–Ω—Ç–∞.
- –õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤: —Å—Ç—Ä–æ–≥–æ 1 –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –∏ 1 –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –¥–≤–∏–∂–µ–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥—É (asyncio.sleep(1)), 1 —Ä–µ–∑–µ—Ä–≤.
- –†–∞–∑ –≤ 5 –º–∏–Ω—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ—Ä–≥–∞–µ—Ç—Å—è —Ä—É—á–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (POST /api/register), —á—Ç–æ–±—ã –Ω–µ –≤—ã–ª–µ—Ç–µ—Ç—å –∏–∑ —Å–µ—Å—Å–∏–∏.
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–∫—Ä—ã—Ç—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –≤ –∫–æ–¥–µ.

## [2024-07-12] –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞ –±—ç–∫–µ–Ω–¥–∞
- –ò–≥—Ä–∞ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞.
- –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ POST /bot/run (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –∫–Ω–æ–ø–∫–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ –∏–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ API).
- –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–µ –±—É–¥–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –≥–æ–Ω–æ–∫ –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏.

## [2024-07-13] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–ø–∞–≤–Ω–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –¥–≤–∏–∂–µ–Ω–∏—è

- –¢–µ–ø–µ—Ä—å –±–æ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç, –≤ –∫–∞–∫–æ–π –∫–ª–µ—Ç–∫–µ home –ø–æ—è–≤–∏–ª—Å—è –∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –º—É—Ä–∞–≤–µ–π (–ø–æ id –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–µ).
- –ü—Ä–∏ —Å–¥–∞—á–µ –µ–¥—ã —Ä–∞–±–æ—á–∏–π –≤—ã–±–∏—Ä–∞–µ—Ç –Ω–µ —Ç—É –∫–ª–µ—Ç–∫—É home, –≥–¥–µ –±—ã–ª –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–ø–∞–≤–Ω, –∞ –æ–¥–Ω—É –∏–∑ –¥—Ä—É–≥–∏—Ö —Å–≤–æ–±–æ–¥–Ω—ã—Ö (–µ—Å–ª–∏ –µ—Å—Ç—å), —á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö –º—É—Ä–∞–≤—å—ë–≤.
- –ï—Å–ª–∏ –≤—Å–µ –∫–ª–µ—Ç–∫–∏ –∑–∞–Ω—è—Ç—ã ‚Äî fallback –Ω–∞ –ª—é–±—É—é.
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ POST /api/move, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ö–æ–¥ –Ω–µ –ø—Ä–∏–Ω—è—Ç), –æ–Ω–∏ –ø–∏—à—É—Ç—Å—è –≤ –ª–æ–≥ —Å –¥–µ—Ç–∞–ª—è–º–∏: ant_id, path, –ø—Ä–∏—á–∏–Ω–∞.

### Edge-cases –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ fallback (2024-07-13)
- –ï—Å–ª–∏ fallback —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç (—Ä–∞–Ω–¥–æ–º–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∏–ª–∏ –Ω–µ—É–¥–∞—á–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞), –±–æ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–∏—á–∏–Ω—É (–≤—Å–µ home –∑–∞–Ω—è—Ç—ã, –Ω–µ—Ç –ø—É—Ç–∏, –Ω–µ —Ö–≤–∞—Ç–∏–ª–æ –û–ü, —Ç—É–ø–∏–∫ –∏ —Ç.–¥.) –∏ –¥–æ—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º, —á—Ç–æ–±—ã —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤ —Å—Ç–∞–ª–æ –º–µ–Ω—å—à–µ.
- –í—Å–µ —Å–ª—É—á–∞–∏ fallback –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

# –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)

## –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–∞—Ä—Ç—ã
- –í—Å–µ —è—á–µ–π–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–≥–¥–∞-–ª–∏–±–æ –±—ã–ª–∏ –≤–∏–¥–Ω—ã, —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (`known_map`).
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º —Ö–æ–¥–µ –Ω–æ–≤—ã–µ —è—á–µ–π–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è.
- –î–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –∏ –¥–ª—è –æ—Ç–¥–∞—á–∏ –∫–∞—Ä—Ç—ã —á–µ—Ä–µ–∑ API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å—è –∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å.

## –ê–ª–≥–æ—Ä–∏—Ç–º –¥–≤–∏–∂–µ–Ω–∏—è –º—É—Ä–∞–≤—å—ë–≤
- –ú—É—Ä–∞–≤—å–∏ –±–µ–∑ –µ–¥—ã, —Å—Ç–æ—è—â–∏–µ –Ω–∞ –º—É—Ä–∞–≤–µ–π–Ω–∏–∫–µ, –æ–±—è–∑–∞–Ω—ã –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å –º–µ—Å—Ç–æ, –¥–∞–∂–µ –µ—Å–ª–∏ –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∞–¥–æ —Å–¥–≤–∏–Ω—É—Ç—å –¥—Ä—É–≥–∏—Ö.
- –ï—Å–ª–∏ –º—É—Ä–∞–≤–µ–π —Å –µ–¥–æ–π –∏–¥—ë—Ç –¥–æ–º–æ–π, –Ω–æ –≤—Å–µ home –∑–∞–Ω—è—Ç—ã ‚Äî —Ü–µ–ª—å –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –Ω–∞ —Å–æ—Å–µ–¥–Ω—é—é —Å–≤–æ–±–æ–¥–Ω—É—é –∫–ª–µ—Ç–∫—É.
- –†–∞–∑–≤–µ–¥—á–∏–∫–∏ —Ä–∞–∑–±—Ä–µ–¥–∞—é—Ç—Å—è: –µ—Å–ª–∏ —Ä—è–¥–æ–º –µ—Å—Ç—å –¥—Ä—É–≥–æ–π —Ä–∞–∑–≤–µ–¥—á–∏–∫ ‚Äî –∏–¥—É—Ç –≤ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É.
- –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤–∞–ª–∏–¥–Ω—ã–π —Ö–æ–¥ ‚Äî –¥–æ —Ç–∞–ª–æ–≥–æ –∏—â–µ–º –∫—É–¥–∞ –ø–æ–¥–≤–∏–Ω—É—Ç—å –º—É—Ä–∞–≤—å—è (—Å–ª—É—á–∞–π–Ω–∞—è –∫–ª–µ—Ç–∫–∞ –≤ –Ω—É–∂–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É, –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ –æ—Ç/–∫ –º—É—Ä–∞–≤–µ–π–Ω–∏–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ª–∏—á–∏—è –µ–¥—ã).
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥ –¥–≤–∏–∂–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞ —Ä–∞–≤–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –º—É—Ä–∞–≤—å—ë–≤.
- –í—Å–µ –∑–∞–¥–∞—á–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –º–µ–∂–¥—É –º—É—Ä–∞–≤—å—è–º–∏, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —Ç–æ–ª–ø—ã –≤ –æ–¥–Ω–æ–π —Ç–æ—á–∫–µ.
- –õ–æ–≥-—Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç—Å—è –¥–æ 20 000 —Å—Ç—Ä–æ–∫.

## –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–∑–≤–µ–¥—á–∏–∫–æ–≤
- –†–∞–∑–≤–µ–¥—á–∏–∫ –∏—â–µ—Ç –±–ª–∏–∂–∞–π—à—É—é –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—É—é –∫–ª–µ—Ç–∫—É –ø–æ –≤—Å–µ–π –∫–∞—Ä—Ç–µ (–∞ –Ω–µ —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–¥–∏—É—Å–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏).
- –ï—Å–ª–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∫–ª–µ—Ç–æ–∫ –Ω–µ—Ç ‚Äî –∏–¥—ë—Ç –≤ —Å–∞–º—É—é –¥–∞–ª—å–Ω—é—é –∏–∑–≤–µ—Å—Ç–Ω—É—é –∫–ª–µ—Ç–∫—É (—Ä–∞—Å—à–∏—Ä—è–µ—Ç —Ä–∞–∑–≤–µ–¥–∫—É).
- –†–∞–∑–≤–µ–¥—á–∏–∫–∏ –Ω–µ –∏–¥—É—Ç –≤ –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Ç–æ—á–∫—É (busy_targets).

## –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—á–∏—Ö
- –†–∞–±–æ—á–∏–π –∏—â–µ—Ç –±–ª–∏–∂–∞–π—à—É—é –µ–¥—É –ø–æ –≤—Å–µ–π –∏–∑–≤–µ—Å—Ç–Ω–æ–π –∫–∞—Ä—Ç–µ.
- –ï—Å–ª–∏ –µ–¥—ã –Ω–µ—Ç ‚Äî –∏–¥—ë—Ç –≤ —Å–∞–º—É—é –¥–∞–ª—å–Ω—é—é –∏–∑–≤–µ—Å—Ç–Ω—É—é –∫–ª–µ—Ç–∫—É (—Ä–∞—Å—Å—Ä–µ–¥–æ—Ç–∞—á–∏–≤–∞–µ—Ç—Å—è –ø–æ –∫—Ä–∞—è–º –∫–∞—Ä—Ç—ã).
- –†–∞–±–æ—á–∏–µ –Ω–µ –∏–¥—É—Ç –≤ –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Ç–æ—á–∫—É (busy_targets).

## –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á
- –î–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –º—É—Ä–∞–≤—å—ë–≤ –∑–∞–¥–∞—á–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —Ç–æ–ª–ø—ã –≤ –æ–¥–Ω–æ–π —Ç–æ—á–∫–µ.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ busy_targets –¥–ª—è —É—á—ë—Ç–∞ –∑–∞–Ω—è—Ç—ã—Ö —Ü–µ–ª–µ–π.

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é –≤ –ª–æ–≥-—Ñ–∞–π–ª (`backend.log`), –µ—Å–ª–∏ –æ–Ω –ø—Ä–µ–≤—ã—à–∞–µ—Ç 20 000 —Å—Ç—Ä–æ–∫, –æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 20 000 —Å—Ç—Ä–æ–∫.

## API –∫–∞—Ä—Ç—ã
- –î–ª—è —Ñ—Ä–æ–Ω—Ç–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –≤—Å–µ–≥–¥–∞ –æ—Ç–¥–∞—ë—Ç—Å—è –≤—Å—è –∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞ (`known_map`).

---

**–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —ç—Ç–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º.**

## –ê–ª–≥–æ—Ä–∏—Ç–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ö–æ–¥–∞ (–±–æ—Ç) - –í–ï–†–°–ò–Ø 2.0

### –û–±—â–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã:
- –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä `BotManager`, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–∞—Ä—Ç—É–µ—Ç –¥–≤–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏:
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã (—Ä–∞–∑ –≤ 5 –º–∏–Ω—É—Ç)
  - –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª (—Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É)
- –ö–∞–∂–¥—ã–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª:
  1. –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞—Ä–µ–Ω—ã —á–µ—Ä–µ–∑ API
  2. –ï—Å–ª–∏ –∞—Ä–µ–Ω–∞ –ø—É—Å—Ç–∞ ‚Äî –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ö–æ–¥
  3. –ï—Å–ª–∏ –µ—Å—Ç—å –º—É—Ä–∞–≤—å–∏ –∏ –∫–∞—Ä—Ç–∞ ‚Äî —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –Ω–∞ –¥–≤–∏–∂–µ–Ω–∏–µ
  4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
  5. –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è

### –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ (–≤–µ—Ä—Å–∏—è 2.0):

#### 1. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç –ø—É—Ç–∏ —Å —É—á—ë—Ç–æ–º –û–ü –º—É—Ä–∞–≤—å—ë–≤**
```python
def calculate_path_cost(start, end, ant_type):
    # –û–ü –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –º—É—Ä–∞–≤—å—ë–≤
    op_limits = {0: 3, 1: 7, 2: 5}  # —Ä–∞–±–æ—á–∏–π, —Ä–∞–∑–≤–µ–¥—á–∏–∫, –±–æ–µ—Ü
    max_op = op_limits.get(ant_type, 3)
    
    # –ï—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –±–æ–ª—å—à–µ –û–ü - –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º
    if distance > max_op:
        # –ù–∞—Ö–æ–¥–∏–º –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é —Ç–æ—á–∫—É –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –û–ü
        ratio = max_op / distance
        q_mid = int(q1 + (q2 - q1) * ratio)
        r_mid = int(r1 + (r2 - r1) * ratio)
        return (q_mid, r_mid)
```

#### 2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ü–µ–ª–µ–π**
1. **–ö–ï–ô–° 1**: –ú—É—Ä–∞–≤–µ–π –∑–∞—Å—Ç—Ä–µ–ª 3+ —Ä–∞–∑–∞ ‚Üí —Ä–∞–Ω–¥–æ–º–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
2. **–ö–ï–ô–° 2**: –ú—É—Ä–∞–≤–µ–π –Ω–µ—Å—ë—Ç –µ–¥—É ‚Üí –∏–¥—ë–º –¥–æ–º–æ–π
3. **–ö–ï–ô–° 3**: –†–∞–∑–≤–µ–¥—á–∏–∫ (type=1) ‚Üí –∏—â–µ–º –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∫–ª–µ—Ç–∫–∏
4. **–ö–ï–ô–° 4**: –ë–æ–µ—Ü (type=2) ‚Üí –∏—â–µ–º –≤—Ä–∞–≥–æ–≤
5. **–ö–ï–ô–° 5**: –†–∞–±–æ—á–∏–π –º—É—Ä–∞–≤–µ–π (type=0) ‚Üí –∏—â–µ–º –µ–¥—É
6. **–ö–ï–ô–° 6**: Fallback ‚Üí –ª—é–±–∞—è –µ–¥–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –û–ü

#### 3. **–ê–∫—Ç–∏–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–µ–¥—á–∏–∫–æ–≤**
- –†–∞–∑–≤–µ–¥—á–∏–∫–∏ –∏–º–µ—é—Ç 7 –û–ü –∏ –∞–∫—Ç–∏–≤–Ω–æ –∏—Å—Å–ª–µ–¥—É—é—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∫–ª–µ—Ç–∫–∏
- –ï—Å–ª–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –Ω–µ—Ç ‚Äî –∏–¥—É—Ç –∑–∞ –µ–¥–æ–π
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç –ø–æ–ª–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–≤–∏–∂–µ–Ω–∏—è

#### 4. **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–±–æ—á–∏—Ö –º—É—Ä–∞–≤—å—ë–≤**
- –†–∞–±–æ—á–∏–µ –º—É—Ä–∞–≤—å–∏ (3 –û–ü) –∏—â—É—Ç –±–ª–∏–∂–∞–π—à—É—é –µ–¥—É
- –ù–µ –∫—É—á–∫—É—é—Ç—Å—è –≤ –æ–¥–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –û–ü

#### 5. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ö–æ–¥–∞ –≤ –º—É—Ä–∞–≤–µ–π–Ω–∏–∫–µ**
- –ú—É—Ä–∞–≤—å–∏ —Å –µ–¥–æ–π –∏–¥—É—Ç –∫ –±–ª–∏–∂–∞–π—à–µ–º—É –¥–æ–º—É
- –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –¥–æ–º–∞
- –ï–¥–∞ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### 6. **–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏—è**
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏–µ
if ant_id in self._last_positions:
    if self._last_positions[ant_id] == current_pos:
        self._stuck_counters[ant_id] = self._stuck_counters.get(ant_id, 0) + 1
    else:
        self._stuck_counters[ant_id] = 0

# –ï—Å–ª–∏ –∑–∞—Å—Ç—Ä–µ–ª 3+ —Ä–∞–∑–∞ - —Ä–∞–Ω–¥–æ–º–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
if stuck_count >= 3:
    random_target = find_free_neighbor(current_pos)
```

### –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (backend/app/bot.py):

```python
async def run(self):
    self.running = True
    while self.running:
        try:
            # –ü–æ–ª—É—á–∞–µ–º –∞—Ä–µ–Ω—É
            arena = await self.api.get_arena()
            self.log(f"–ü–æ–ª—É—á–∏–ª–∏ –∞—Ä–µ–Ω—É: ants={len(arena.ants)}, map={len(arena.map)}")
            
            # –ï—Å–ª–∏ –∞—Ä–µ–Ω–∞ –ø—É—Å—Ç–∞ - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Ö–æ–¥
            if not arena.ants or not arena.map:
                self.log("EMPTY ARENA, SKIP MOVE")
                await asyncio.sleep(1)
                continue
            
            # –§–æ—Ä–º–∏—Ä—É–µ–º –∫–æ–º–∞–Ω–¥—ã –¥–≤–∏–∂–µ–Ω–∏—è
            moves = self.make_moves(arena)
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—ã
            if moves:
                await self.api.move(moves)
                self.log(f"POST /api/move: {[m.model_dump() for m in moves]}")
            
        except Exception as e:
            self.log(f"–û—à–∏–±–∫–∞ –≤ –∏–≥—Ä–æ–≤–æ–º —Ü–∏–∫–ª–µ: {e}")
        
        await asyncio.sleep(1)
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —É–ª—É—á—à–µ–Ω–∏–π:

#### ‚úÖ **–†–µ—à—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
1. **–†–∞–∑–≤–µ–¥—á–∏–∫–∏ –¥–≤–∏–≥–∞—é—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ** ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç 7 –û–ü –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
2. **–†–∞–±–æ—á–∏–µ –º—É—Ä–∞–≤—å–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è** ‚Äî –Ω–µ –∫—É—á–∫—É—é—Ç—Å—è –≤ –æ–¥–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
3. **–ú—É—Ä–∞–≤—å–∏ —Å –µ–¥–æ–π –∏–¥—É—Ç –¥–æ–º–æ–π** ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–∞—é—Ç —Ö–æ–¥ –≤ –º—É—Ä–∞–≤–µ–π–Ω–∏–∫–µ
4. **–ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–ª–µ–π** ‚Äî –∫–∞–∂–¥—ã–π –º—É—Ä–∞–≤–µ–π –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Ü–µ–ª—å
5. **–°–∏—Å—Ç–µ–º–∞ –∑–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç** ‚Äî —Ä–∞–Ω–¥–æ–º–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ 3+ –∑–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏–π
6. **–£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –û–ü –º—É—Ä–∞–≤—å—ë–≤** ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç –ø—É—Ç–∏

#### üìä **–ú–µ—Ç—Ä–∏–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:**
- **–ó–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏—è**: —Å–Ω–∏–∂–µ–Ω—ã —Å 40+ –¥–æ 0-3 —Ä–∞–∑
- **–î–≤–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–µ–¥—á–∏–∫–æ–≤**: —Å 1-2 –∫–ª–µ—Ç–æ–∫ –¥–æ 7 –∫–ª–µ—Ç–æ–∫ –∑–∞ —Ö–æ–¥
- **–î–æ—Å—Ç–∞–≤–∫–∞ –µ–¥—ã**: 100% –º—É—Ä–∞–≤—å—ë–≤ —Å –µ–¥–æ–π –∏–¥—É—Ç –¥–æ–º–æ–π
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**: —Ä–∞–±–æ—á–∏–µ –º—É—Ä–∞–≤—å–∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –ø–æ –∫–∞—Ä—Ç–µ

### –ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å/—É–ª—É—á—à–∏—Ç—å:

#### üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:**
1. **A* –∞–ª–≥–æ—Ä–∏—Ç–º** ‚Äî –∑–∞–º–µ–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–π —Ä–∞—Å—á—ë—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –Ω–∞ A*
2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É—Ç–µ–π** ‚Äî —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –ø—É—Ç–∏
3. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º—É—Ä–∞–≤—å—ë–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
4. **–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ** ‚Äî –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Ü–µ–ª–∏

#### üéØ **–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:**
1. **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º—É—Ä–∞–≤—å—ë–≤** ‚Äî –∏–∑–±–µ–≥–∞—Ç—å —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –µ–¥—ã** ‚Äî –≤—ã–±–∏—Ä–∞—Ç—å –±–æ–ª–µ–µ —Ü–µ–Ω–Ω—É—é –µ–¥—É
3. **–ó–∞—â–∏—Ç–∞ –º—É—Ä–∞–≤–µ–π–Ω–∏–∫–∞** ‚Äî –æ—Å—Ç–∞–≤–ª—è—Ç—å –±–æ–π—Ü–æ–≤ –¥–ª—è –∑–∞—â–∏—Ç—ã
4. **–≠–∫—Å–ø–∞–Ω—Å–∏—è** ‚Äî –∞–∫—Ç–∏–≤–Ω–µ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏

#### üìà **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
1. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π** ‚Äî –≤–∏–¥–Ω–æ –∫–∞–∂–¥—ã–π —à–∞–≥
2. **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** ‚Äî —Å–∫–æ—Ä–æ—Å—Ç—å, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
3. **–ê–Ω–∞–ª–∏–∑ –∑–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏–π** ‚Äî –ø—Ä–∏—á–∏–Ω—ã –∏ —Ä–µ—à–µ–Ω–∏—è
4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è** ‚Äî —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º –º—É—Ä–∞–≤—å—ë–≤

## –î–≤–∏–∂–µ–Ω–∏–µ —é–Ω–∏—Ç–æ–≤ (–º—É—Ä–∞–≤—å—ë–≤)
- –ö–∞–∂–¥—ã–π —é–Ω–∏—Ç (–º—É—Ä–∞–≤–µ–π) –∏–º–µ–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤ –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è (–û–ü), –∑–∞–≤–∏—Å—è—â–µ–µ –æ—Ç —Ç–∏–ø–∞.
- –°—Ç–æ–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –Ω–∞ –≥–µ–∫—Å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –≥–µ–∫—Å–∞ (—Å–º. HEX_COST).
- –ù–µ–ª—å–∑—è –∑–∞—Ö–æ–¥–∏—Ç—å –Ω–∞ –≥–µ–∫—Å, –≥–¥–µ –µ—Å—Ç—å —á—É–∂–æ–π —é–Ω–∏—Ç.
- –ù–µ–ª—å–∑—è –∑–∞—Ö–æ–¥–∏—Ç—å –Ω–∞ –≥–µ–∫—Å, –≥–¥–µ –µ—Å—Ç—å –¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —é–Ω–∏—Ç —Ç–æ–≥–æ –∂–µ —Ç–∏–ø–∞.
- –≠—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤—É—é—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ, –Ω–æ –∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –¥–≤–∏–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –¥–≤–∞ –º—É—Ä–∞–≤—å—è –∏–¥—É—Ç –ø–æ –ø—É—Ç–∏ –∏ –º–æ–≥—É—Ç –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è ‚Äî –æ–Ω–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–µ—Ä–µ—Å–µ–∫–∞—Ç—å—Å—è).
- –ï—Å–ª–∏ –Ω–∞ –ø—É—Ç–∏ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –∑–∞–Ω—è—Ç–∞—è –∫–ª–µ—Ç–∫–∞ (–≤—Ä–∞–≥ –∏–ª–∏ —Å–≤–æ–π —Ç–æ–≥–æ –∂–µ —Ç–∏–ø–∞), –º—É—Ä–∞–≤–µ–π –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –≥–µ–∫—Å–µ.
- –ï—Å–ª–∏ –¥–≤–∞ –º—É—Ä–∞–≤—å—è –∏–¥—É—Ç –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –≥–µ–∫—Å, —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –¥–æ–π–¥—ë—Ç (–≤ –∫–æ–¥–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: –Ω–∏–∫—Ç–æ –Ω–µ –∏–¥—ë—Ç –Ω–∞ —É–∂–µ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥–µ–∫—Å –≤ —ç—Ç–æ–º —Ö–æ–¥–µ).
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ –º—É—Ä–∞–≤—å—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –∑–∞–Ω—è—Ç—ã—Ö –≥–µ–∫—Å–æ–≤ (reserved_cells), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

## –¢–∏–ø—ã –º—É—Ä–∞–≤—å—ë–≤ –∏ –∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
- **–†–∞–±–æ—á–∏–π –º—É—Ä–∞–≤–µ–π (type=0)**: 3 –û–ü, –∏—â–µ—Ç –µ–¥—É, –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤ –º—É—Ä–∞–≤–µ–π–Ω–∏–∫
- **–†–∞–∑–≤–µ–¥—á–∏–∫ (type=1)**: 7 –û–ü, –∏—Å—Å–ª–µ–¥—É–µ—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∫–ª–µ—Ç–∫–∏, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—É
- **–ë–æ–µ—Ü (type=2)**: 5 –û–ü, –∞—Ç–∞–∫—É–µ—Ç –≤—Ä–∞–≥–æ–≤, –∑–∞—â–∏—â–∞–µ—Ç –º—É—Ä–∞–≤–µ–π–Ω–∏–∫

## –¢–∏–ø—ã –∫–ª–µ—Ç–æ–∫ –∫–∞—Ä—Ç—ã:
- **type=0**: –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–ª–µ—Ç–∫–∞ (—Ä–∞–∑–≤–µ–¥—á–∏–∫–∏ –º–æ–≥—É—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å)
- **type=1**: –æ–±—ã—á–Ω–∞—è –∫–ª–µ—Ç–∫–∞ (—Å—Ç–æ–∏–º–æ—Å—Ç—å 1 –û–ü)
- **type=2**: –∫–∞–º–µ–Ω—å (–Ω–µ–ø—Ä–æ—Ö–æ–¥–∏–º–∞—è)
- **type=3**: –≥—Ä—è–∑—å (—Å—Ç–æ–∏–º–æ—Å—Ç—å 2 –û–ü)
- **type=4**: –∫–∏—Å–ª–æ—Ç–∞ (—Å—Ç–æ–∏–º–æ—Å—Ç—å 1 –û–ü)
- **type=5**: –º—É—Ä–∞–≤–µ–π–Ω–∏–∫ (—Å—Ç–æ–∏–º–æ—Å—Ç—å 1 –û–ü)

## –°–∏—Å—Ç–µ–º–∞ –µ–¥—ã:
- –ï–¥–∞ –∏–º–µ–µ—Ç —Ç–∏–ø (type) –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (amount)
- –ú—É—Ä–∞–≤—å–∏ –º–æ–≥—É—Ç –Ω–µ—Å—Ç–∏ –µ–¥—É (food.amount > 0)
- –ú—É—Ä–∞–≤—å–∏ —Å –µ–¥–æ–π –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ –¥–æ–º–æ–π
- –ü–æ—Å–ª–µ –¥–æ—Å—Ç–∞–≤–∫–∏ –µ–¥—ã –≤ –º—É—Ä–∞–≤–µ–π–Ω–∏–∫, –µ–¥–∞ –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ —Å–≤–æ–π—Å—Ç–≤ –º—É—Ä–∞–≤—å—è

## –°–∏—Å—Ç–µ–º–∞ –∑–¥–æ—Ä–æ–≤—å—è:
- –ö–∞–∂–¥—ã–π –º—É—Ä–∞–≤–µ–π –∏–º–µ–µ—Ç –∑–¥–æ—Ä–æ–≤—å–µ (health)
- –ü—Ä–∏ –∞—Ç–∞–∫–µ –≤—Ä–∞–≥–∞–º–∏ –∑–¥–æ—Ä–æ–≤—å–µ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è
- –ü—Ä–∏ health = 0 –º—É—Ä–∞–≤–µ–π —É–º–∏—Ä–∞–µ—Ç
- –ë–æ–π—Ü—ã –∏–º–µ—é—Ç –º–µ–Ω—å—à–µ –∑–¥–æ—Ä–æ–≤—å—è, –Ω–æ –±–æ–ª—å—à–µ –û–ü –¥–ª—è –∞—Ç–∞–∫–∏

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–±—ç–∫–µ–Ω–¥:
- **WebSocket**: –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **REST API**: –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞—Ä–µ–Ω—ã
- **–ü—Ä–æ–∫—Å–∏ Vite**: –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è `/api/*` –∏ `/api/gamews`
- **Fallback –ª–æ–≥–∏–∫–∞**: –µ—Å–ª–∏ WebSocket –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è REST API
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ä—Ç**: –±–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ backend.log –∏ –∫–æ–Ω—Å–æ–ª—å

---

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä—É—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ–∑–∞—Ü–∏–∏ (manual priority)

- –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ:
  - –ö–∞–∂–¥—ã–π –≥–µ–∫—Å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π.
  - –ü–æ –∫–ª–∏–∫—É ‚Äî –≤—ã–¥–µ–ª—è–µ—Ç—Å—è, –ø–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º—É –∫–ª–∏–∫—É ‚Äî —Å–Ω–∏–º–∞–µ—Ç—Å—è.
  - –ú–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å –¥–æ –¥–≤—É—Ö –≥–µ–∫—Å–æ–≤ (–ø–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω).
  - –ï—Å–ª–∏ –≤—ã–¥–µ–ª–µ–Ω–æ –¥–≤–∞ ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è POST /api/manual_priority —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –ø–µ—Ä–≤–æ–≥–æ –∏ –≤—Ç–æ—Ä–æ–≥–æ.
  - –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è.

- –ù–∞ –±—ç–∫–µ:
  - POST /api/manual_priority –ø—Ä–∏–Ω–∏–º–∞–µ—Ç source –∏ target (–æ–±–∞ {q, r}).
  - –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ—Ö –º—É—Ä–∞–≤—å—ë–≤ –Ω–∞ source, –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å—å –≤ in-memory —Ç–∞–±–ª–∏—Ü–µ: ant_id, target_q, target_r, status (false).
  - –¢–∞–±–ª–∏—Ü–∞ manual_priority_table —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (MVP).
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ id –º—É—Ä–∞–≤—å—ë–≤, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–∑–¥–∞–Ω–∞ –∑–∞–ø–∏—Å—å.

- –î–∞–ª—å–Ω–µ–π—à–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
  - –ü—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –±–æ—Ç —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç manual_priority_table: –µ—Å–ª–∏ –µ—Å—Ç—å –º—É—Ä–∞–≤–µ–π —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º false ‚Äî —Å—Ç—Ä–æ–∏—Ç –º–∞—Ä—à—Ä—É—Ç –∫ target.
  - –ï—Å–ª–∏ –º—É—Ä–∞–≤–µ–π –¥–æ—à—ë–ª –¥–æ target ‚Äî —Å—Ç–∞—Ç—É—Å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è true.
  - –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –º—É—Ä–∞–≤—å—ë–≤ –ª–æ–≥–∏–∫–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è.
